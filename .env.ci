# CI/CD environment configuration

###> symfony/framework-bundle ###
APP_ENV=test
APP_SECRET=ci_secret_key_for_testing_only
APP_DEBUG=0
###< symfony/framework-bundle ###

###> doctrine/doctrine-bundle ###
DATABASE_URL="mysql://php_user:php_password@mariadb:3306/php_benchmark_test?serverVersion=10.11.2-MariaDB&charset=utf8mb4"
###< doctrine/doctrine-bundle ###

###> symfony/messenger ###
# Redis transport for async execution (CI)
MESSENGER_TRANSPORT_DSN=redis://redis:6379/messages
###< symfony/messenger ###

###> symfony/mailer ###
MAILER_DSN=null://null
###< symfony/mailer ###

###> symfony/mercure-bundle ###
MERCURE_URL=http://mercure/.well-known/mercure
MERCURE_PUBLIC_URL=http://localhost:3000/.well-known/mercure
MERCURE_JWT_SECRET="!ChangeThisMercureHubJWTSecretKey!"
###< symfony/mercure-bundle ###

###> php_benchmark configuration ###
# Benchmark execution settings (CI: balanced resources)
BENCHMARK_CONCURRENCY=4
BENCHMARK_TIMEOUT=30

# Redis configuration (CI: no persistence, moderate memory)
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE=""

# Supervisor workers (CI: 2 workers, similar to dev)
MESSENGER_WORKER_COUNT=2
MESSENGER_WORKER_MEMORY_LIMIT=128
###< php_benchmark configuration ###
