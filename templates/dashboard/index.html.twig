{% extends 'base.html.twig' %}

{% block title %}PHP Version Comparison{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}

{% block body %}
    <div class="dashboard__container"
         data-controller="dashboard-mercure benchmark-filter"
         data-dashboard-mercure-url-value="{{ mercure_public_url }}"
         data-dashboard-mercure-topic-value="benchmark/results">

        <h1 class="dashboard__title">PHP Performance Benchmarks</h1>

        {# Statistics Overview #}
        <div class="stats-overview">
            <div class="stats-overview__card">
                <div class="stats-overview__icon">üì¶</div>
                <div class="stats-overview__content">
                    <div class="stats-overview__value">{{ total_benchmarks }}</div>
                    <div class="stats-overview__label">Available Benchmarks</div>
                </div>
            </div>
            <div class="stats-overview__card">
                <div class="stats-overview__icon">üöÄ</div>
                <div class="stats-overview__content">
                    <div class="stats-overview__value">{{ php_versions_tested }}</div>
                    <div class="stats-overview__label">PHP Versions</div>
                </div>
            </div>
            <div class="stats-overview__card">
                <div class="stats-overview__icon">‚úÖ</div>
                <div class="stats-overview__content">
                    <div class="stats-overview__value">{{ benchmarks_executed }}</div>
                    <div class="stats-overview__label">Benchmarks Executed</div>
                </div>
            </div>
            <div class="stats-overview__card">
                <div class="stats-overview__icon">‚ö°</div>
                <div class="stats-overview__content">
                    <div class="stats-overview__value">{{ total_executions }}</div>
                    <div class="stats-overview__label">Total Test Runs</div>
                </div>
            </div>
        </div>

        {# Filter and Sort Section #}
        <div class="filter">
            <div class="filter__container">
                {# Search Bar #}
                <div class="filter__search-section">
                    <div class="filter__search-wrapper">
                        <span class="filter__search-icon">üîç</span>
                        <input
                            type="text"
                            class="filter__search-input"
                            placeholder="Search benchmarks by name, category or code..."
                            data-benchmark-filter-target="searchInput"
                            data-action="input->benchmark-filter#search"
                        />
                    </div>
                    <button
                        class="filter__reset-button"
                        data-action="click->benchmark-filter#resetFilters"
                        title="Reset filters"
                    >
                        ‚úï Reset
                    </button>
                </div>

                {# Sort and Filter Buttons #}
                <div class="filter__controls">
                    <div class="filter__sort-group">
                        <span class="filter__label">Sort by:</span>
                        <button
                            class="filter__sort-button filter__sort-button--active"
                            data-benchmark-filter-target="sortButton"
                            data-sort-by="name"
                            data-action="click->benchmark-filter#sort"
                        >
                            Name <span class="filter__sort-icon">‚Üë</span>
                        </button>
                        <button
                            class="filter__sort-button"
                            data-benchmark-filter-target="sortButton"
                            data-sort-by="category"
                            data-action="click->benchmark-filter#sort"
                        >
                            Category <span class="filter__sort-icon">‚Üï</span>
                        </button>
                    </div>

                    <div class="filter__category-group">
                        <span class="filter__label">Category:</span>
                        <button
                            class="filter__category-button filter__category-button--active"
                            data-benchmark-filter-target="categoryFilter"
                            data-category="all"
                            data-action="click->benchmark-filter#filterByCategory"
                        >
                            All
                        </button>
                        <button
                            class="filter__category-button"
                            data-benchmark-filter-target="categoryFilter"
                            data-category="errorhandling"
                            data-action="click->benchmark-filter#filterByCategory"
                        >
                            ErrorHandling
                        </button>
                        <button
                            class="filter__category-button"
                            data-benchmark-filter-target="categoryFilter"
                            data-category="loop"
                            data-action="click->benchmark-filter#filterByCategory"
                        >
                            Loop
                        </button>
                        <button
                            class="filter__category-button"
                            data-benchmark-filter-target="categoryFilter"
                            data-category="string"
                            data-action="click->benchmark-filter#filterByCategory"
                        >
                            String
                        </button>
                    </div>
                </div>

                {# Stats #}
                <div class="filter__stats-container">
                    <span class="filter__stats">Loading...</span>
                </div>
            </div>
        </div>

        {# Benchmark Cards Container #}
        <div class="dashboard__benchmarks">
            <twig:BenchmarkList />

            {# No Results Message #}
            <div class="filter__no-results" data-benchmark-filter-target="noResults" style="display: none;">
                <div class="filter__no-results-icon">üîç</div>
                <h3 class="filter__no-results-title">No benchmarks found</h3>
                <p class="filter__no-results-text">
                    Try modifying your search criteria or reset the filters.
                </p>
            </div>
        </div>
    </div>
{% endblock %}
